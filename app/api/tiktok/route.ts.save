import { NextRequest, NextResponse } from 
'next/server'; import YTDlpWrap from 
'yt-dlp-wrap'; export async function POST(request: 
NextRequest) {
  try { const { url } = await request.json();
    
    if (!url) { return NextResponse.json( { error: 
        'TikTok URL is required' }, { status: 400 
        }
      );
    }
    const ytDlpWrap = new YTDlpWrap();
    
    // Extract video info without downloading
    const videoInfo = await 
    ytDlpWrap.getVideoInfo(url);
    
    return NextResponse.json({ success: true, 
      data: {
        title: videoInfo.title, duration: 
        videoInfo.duration, view_count: 
        videoInfo.view_count, like_count: 
        videoInfo.like_count, download_url: 
        videoInfo.url, thumbnail: 
        videoInfo.thumbnail, uploader: 
        videoInfo.uploader, upload_date: 
        videoInfo.upload_date
      }
    });
  } catch (error) {
    console.error('TikTok API Error:', error); 
    return NextResponse.json(
      { error: 'Failed to process TikTok URL' }, { 
      status: 500 }
    );
  }
}
 
